<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune Cookie</title>

    <!-- Google Font: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <style>
        /* General Styling */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #2178ae;
            font-family: 'Poppins', sans-serif;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Background Dots */
        .dot {
            position: absolute;
            border-radius: 50%;
            opacity: 0.8;
            animation: floatDots 6s infinite alternate ease-in-out;
        }

        @keyframes floatDots {
            0% { transform: translate(0, 0); }
            100% { transform: translate(calc(40px * var(--dirX)), calc(40px * var(--dirY))); }
        }

        .dot.small { width: 8px; height: 8px; }
        .dot.medium { width: 12px; height: 12px; }
        .dot.large { width: 16px; height: 16px; }

        /* Fortune Cookie Container */
        .container {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }

        /* Header Image */
        header {
            width: 100%;
            max-width: 400px;
            margin-bottom: 30px;
        }

        header img {
            width: 100%;
            height: auto;
        }

        /* Instruction Text */
        h1 {
            font-size: 1.8em;
            font-weight: 600;
            text-transform: uppercase;
            color: #cfe7cd;
            margin-bottom: 20px;
        }

        /* Fortune Cookie Container */
        .cookie-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 250px;
            width: 300px;
            z-index: 1;
        }

        /* Cookie Halves */
        .cookie-half {
            position: absolute;
            width: 45%;
            transform-origin: bottom center;
            transition: transform 0.6s ease;
        }

        #left-cookie {
            left: 50%;
            transform: translateX(-50%) rotate(0deg);
        }

        #right-cookie {
            right: 50%;
            transform: translateX(50%) rotate(0deg);
        }

        /* Opened Position */
        .opened #left-cookie {
            transform: translateX(-150%) rotate(-45deg);
        }

        .opened #right-cookie {
            transform: translateX(150%) rotate(45deg);
        }

        /* Fortune Box - Fixed Size */
        #fortune-box {
            position: absolute;
            background: white;
            color: #2178ae;
            font-weight: 600;
            padding: 12px 15px;
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            font-size: 1em;
            width: 250px; /* Fixed width for all fortunes */
            height: 55px; /* Fixed height */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            opacity: 0;
            transform: scale(0.8);
            transition: opacity 0.5s ease, transform 0.5s ease;
            z-index: 1;
        }

        .opened #fortune-box {
            opacity: 1;
            transform: scale(1);
        }

        /* Try Again Button */
        #reset-btn {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 0.9em;
            cursor: pointer;
            background: #fac92c; /* Yellow */
            color: #2178ae;
            text-transform: uppercase;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            transition: transform 0.3s ease;
            position: absolute;
            bottom: 10%;
            display: none;
        }

        #reset-btn:hover {
            transform: scale(1.1);
        }

    </style>
</head>
<body>
    <!-- Background Dots -->
    <script>
        const colors = ["#f7b0be", "#fac92c", "#f15a42", "#cfe5cc"];
        for (let i = 0; i < 30; i++) {
            let dot = document.createElement("div");
            dot.classList.add("dot");

            let sizes = ["small", "medium", "large"];
            dot.classList.add(sizes[Math.floor(Math.random() * sizes.length)]);

            dot.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

            dot.style.top = Math.random() * 100 + "vh";
            dot.style.left = Math.random() * 100 + "vw";

            dot.style.setProperty("--dirX", Math.random() > 0.5 ? 1 : -1);
            dot.style.setProperty("--dirY", Math.random() > 0.5 ? 1 : -1);

            document.body.appendChild(dot);
        }
    </script>

    <!-- Layout Container -->
    <div class="container">
        <!-- Header Image -->
        <header>
            <img src="img/header.png" alt="Fortune Cookie Header">
        </header>

        <!-- Instruction Text -->
        <h1>Tap the Cookie</h1>

        <!-- Fortune Cookie -->
        <div class="cookie-container" id="cookie-container" onclick="openCookie(event)">
            <img src="img/fortune-cookie-open-left.png" alt="Left Cookie Half" class="cookie-half" id="left-cookie">
            <img src="img/fortune-cookie-open-right.png" alt="Right Cookie Half" class="cookie-half" id="right-cookie">
            <div id="fortune-box"></div> <!-- Empty fortune box -->
        </div>

        <!-- Reset Button -->
        <button id="reset-btn" onclick="resetCookie()">Try Again</button>
    </div>

    <script>
        const fortunes = [
            "You will soon be reminded how deeply you are loved.",
            "A special someone thinks you are their greatest treasure.",
            "Good fortune follows those who love with their whole heart.",
            "A warm embrace is in your near future.",
            "You hold the key to someone’s happiest moments.",
            "Your kindness makes love grow stronger each day.",
            "An unexpected “I love you” will brighten your day.",
            "A lifetime of laughter and love awaits you.",
            "You are loved more than you know.",
            "Your heart has found its perfect match.",
            "Every day with you is its own kind of good luck.",
            "A sweet surprise is coming your way.",
            "The next time you sit down, a dog will instantly claim your lap.",
            "A dog will sneeze directly into your face at an inopportune moment.",
            "A future discussion about what to watch will take longer than the show itself."
        ];

        let isOpened = false;

        function openCookie(event) {
            if (!isOpened) {
                document.getElementById("cookie-container").classList.add("opened");
                document.getElementById("fortune-box").textContent = fortunes[Math.floor(Math.random() * fortunes.length)];
                document.getElementById("reset-btn").style.display = "block";
                isOpened = true;
            } else {
                resetCookie();
                setTimeout(openCookie, 500);
            }
            event.stopPropagation();
        }

        function resetCookie() {
            isOpened = false;
            document.getElementById("cookie-container").classList.remove("opened");
            document.getElementById("fortune-box").textContent = "";
            document.getElementById("reset-btn").style.display = "none";
        }

        document.body.addEventListener("click", function(event) {
            if (!event.target.closest(".cookie-container")) {
                resetCookie();
            }
        });
    </script>
</body>
</html>
